<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Control Enfriador M√©dula</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f0f4f8;
      padding-top: 50px;
    }
    h1 {
      color: #333;
    }
    button {
      font-size: 20px;
      padding: 15px 30px;
      margin: 20px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
      transition: background-color 0.3s;
    }
    #btnFrio {
      background-color: #00bfff;
      color: white;
    }
    #btnFrio:hover {
      background-color: #0099cc;
    }
    #btnCalor {
      background-color: #ff4500;
      color: white;
    }
    #btnCalor:hover {
      background-color: #cc3700;
    }
    #btnStop {
      background-color: #444;
      color: white;
    }
    #btnStop:hover {
      background-color: #222;
    }
  </style>
</head>
<body>
  <h1>Enfriador de M√©dula - Control BLE</h1>
  <button id="btnConnect">üîó Conectar</button><br>
  <button id="btnFrio">üßä Activar Fr√≠o</button>
  <button id="btnCalor">üî• Activar Calor</button>
  <button id="btnStop">‚èπÔ∏è Apagar</button>

  <script>
    let device;
    let characteristic;

    async function connect() {
      try {
        device = await navigator.bluetooth.requestDevice({
          filters: [{ name: "PeltierBLE" }],
          optionalServices: ["6e400001-b5a3-f393-e0a9-e50e24dcca9e"]
        });

        const server = await device.gatt.connect();
        const service = await server.getPrimaryService("6e400001-b5a3-f393-e0a9-e50e24dcca9e");
        characteristic = await service.getCharacteristic("6e400002-b5a3-f393-e0a9-e50e24dcca9e");
        alert("‚úÖ ¬°Conectado con √©xito!");
      } catch (error) {
        console.error(error);
        alert("‚ùå Error al conectar");
      }
    }

    function sendCommand(cmd) {
      if (!characteristic) {
        alert("Con√©ctate primero");
        return;
      }
      const data = new TextEncoder().encode(cmd);
      characteristic.writeValue(data);
    }

    document.getElementById("btnConnect").addEventListener("click", connect);
    document.getElementById("btnFrio").addEventListener("click", () => sendCommand("f"));
    document.getElementById("btnCalor").addEventListener("click", () => sendCommand("c"));
    document.getElementById("btnStop").addEventListener("click", () => sendCommand("0"));
  </script>
</body>
</html>
